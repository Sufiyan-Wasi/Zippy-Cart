"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_lib_models_Order_ts";
exports.ids = ["_rsc_lib_models_Order_ts"];
exports.modules = {

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ getMongoClient),\n/* harmony export */   getDb: () => (/* binding */ getDb),\n/* harmony export */   isMongoDBConfigured: () => (/* binding */ isMongoDBConfigured)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst options = {};\nlet client = null;\nlet clientPromise = null;\n// Initialize connection lazily\nfunction getClientPromise() {\n    const uri = process.env.MONGODB_URI;\n    if (!uri) {\n        throw new Error(\"MongoDB URI not configured. Please set MONGODB_URI in .env.local\");\n    }\n    if (clientPromise) {\n        return clientPromise;\n    }\n    if (true) {\n        // In development mode, use a global variable so that the value\n        // is preserved across module reloads caused by HMR (Hot Module Replacement).\n        let globalWithMongo = global;\n        if (!globalWithMongo._mongoClientPromise) {\n            client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n            globalWithMongo._mongoClientPromise = client.connect();\n        }\n        clientPromise = globalWithMongo._mongoClientPromise;\n    } else {}\n    return clientPromise;\n}\n// Export a function that returns the client promise (lazy initialization)\nfunction getMongoClient() {\n    return getClientPromise();\n}\nasync function getDb() {\n    const client = await getClientPromise();\n    const dbName = process.env.MONGODB_DB_NAME || \"ZippyCart\";\n    return client.db(dbName);\n}\nfunction isMongoDBConfigured() {\n    return !!process.env.MONGODB_URI;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUM7QUFFekMsTUFBTUMsVUFBVSxDQUFDO0FBRWpCLElBQUlDLFNBQTZCO0FBQ2pDLElBQUlDLGdCQUE2QztBQUVqRCwrQkFBK0I7QUFDL0IsU0FBU0M7SUFDUCxNQUFNQyxNQUFNQyxRQUFRQyxHQUFHLENBQUNDLFdBQVc7SUFDbkMsSUFBSSxDQUFDSCxLQUFLO1FBQ1IsTUFBTSxJQUFJSSxNQUFNO0lBQ2xCO0lBRUEsSUFBSU4sZUFBZTtRQUNqQixPQUFPQTtJQUNUO0lBRUEsSUFBSUcsSUFBc0MsRUFBRTtRQUMxQywrREFBK0Q7UUFDL0QsNkVBQTZFO1FBQzdFLElBQUlJLGtCQUFrQkM7UUFJdEIsSUFBSSxDQUFDRCxnQkFBZ0JFLG1CQUFtQixFQUFFO1lBQ3hDVixTQUFTLElBQUlGLGdEQUFXQSxDQUFDSyxLQUFLSjtZQUM5QlMsZ0JBQWdCRSxtQkFBbUIsR0FBR1YsT0FBT1csT0FBTztRQUN0RDtRQUNBVixnQkFBZ0JPLGdCQUFnQkUsbUJBQW1CO0lBQ3JELE9BQU8sRUFJTjtJQUVELE9BQU9UO0FBQ1Q7QUFFQSwwRUFBMEU7QUFDM0QsU0FBU1c7SUFDdEIsT0FBT1Y7QUFDVDtBQUVPLGVBQWVXO0lBQ3BCLE1BQU1iLFNBQVMsTUFBTUU7SUFDckIsTUFBTVksU0FBU1YsUUFBUUMsR0FBRyxDQUFDVSxlQUFlLElBQUk7SUFDOUMsT0FBT2YsT0FBT2dCLEVBQUUsQ0FBQ0Y7QUFDbkI7QUFFTyxTQUFTRztJQUNkLE9BQU8sQ0FBQyxDQUFDYixRQUFRQyxHQUFHLENBQUNDLFdBQVc7QUFDbEMiLCJzb3VyY2VzIjpbIkY6XFxDb2RlX0pvdXJuZXlcXFdlYiBEZXYgUHJvamVjdFxcWmlwcHkgQ2FydFxcbGliXFxkYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb25nb0NsaWVudCwgRGIgfSBmcm9tIFwibW9uZ29kYlwiXG5cbmNvbnN0IG9wdGlvbnMgPSB7fVxuXG5sZXQgY2xpZW50OiBNb25nb0NsaWVudCB8IG51bGwgPSBudWxsXG5sZXQgY2xpZW50UHJvbWlzZTogUHJvbWlzZTxNb25nb0NsaWVudD4gfCBudWxsID0gbnVsbFxuXG4vLyBJbml0aWFsaXplIGNvbm5lY3Rpb24gbGF6aWx5XG5mdW5jdGlvbiBnZXRDbGllbnRQcm9taXNlKCk6IFByb21pc2U8TW9uZ29DbGllbnQ+IHtcbiAgY29uc3QgdXJpID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUklcbiAgaWYgKCF1cmkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNb25nb0RCIFVSSSBub3QgY29uZmlndXJlZC4gUGxlYXNlIHNldCBNT05HT0RCX1VSSSBpbiAuZW52LmxvY2FsXCIpXG4gIH1cblxuICBpZiAoY2xpZW50UHJvbWlzZSkge1xuICAgIHJldHVybiBjbGllbnRQcm9taXNlXG4gIH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xuICAgIC8vIEluIGRldmVsb3BtZW50IG1vZGUsIHVzZSBhIGdsb2JhbCB2YXJpYWJsZSBzbyB0aGF0IHRoZSB2YWx1ZVxuICAgIC8vIGlzIHByZXNlcnZlZCBhY3Jvc3MgbW9kdWxlIHJlbG9hZHMgY2F1c2VkIGJ5IEhNUiAoSG90IE1vZHVsZSBSZXBsYWNlbWVudCkuXG4gICAgbGV0IGdsb2JhbFdpdGhNb25nbyA9IGdsb2JhbCBhcyB0eXBlb2YgZ2xvYmFsVGhpcyAmIHtcbiAgICAgIF9tb25nb0NsaWVudFByb21pc2U/OiBQcm9taXNlPE1vbmdvQ2xpZW50PlxuICAgIH1cblxuICAgIGlmICghZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2UpIHtcbiAgICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpXG4gICAgICBnbG9iYWxXaXRoTW9uZ28uX21vbmdvQ2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KClcbiAgICB9XG4gICAgY2xpZW50UHJvbWlzZSA9IGdsb2JhbFdpdGhNb25nby5fbW9uZ29DbGllbnRQcm9taXNlXG4gIH0gZWxzZSB7XG4gICAgLy8gSW4gcHJvZHVjdGlvbiBtb2RlLCBpdCdzIGJlc3QgdG8gbm90IHVzZSBhIGdsb2JhbCB2YXJpYWJsZS5cbiAgICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCBvcHRpb25zKVxuICAgIGNsaWVudFByb21pc2UgPSBjbGllbnQuY29ubmVjdCgpXG4gIH1cblxuICByZXR1cm4gY2xpZW50UHJvbWlzZVxufVxuXG4vLyBFeHBvcnQgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGNsaWVudCBwcm9taXNlIChsYXp5IGluaXRpYWxpemF0aW9uKVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0TW9uZ29DbGllbnQoKTogUHJvbWlzZTxNb25nb0NsaWVudD4ge1xuICByZXR1cm4gZ2V0Q2xpZW50UHJvbWlzZSgpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREYigpOiBQcm9taXNlPERiPiB7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldENsaWVudFByb21pc2UoKVxuICBjb25zdCBkYk5hbWUgPSBwcm9jZXNzLmVudi5NT05HT0RCX0RCX05BTUUgfHwgXCJaaXBweUNhcnRcIlxuICByZXR1cm4gY2xpZW50LmRiKGRiTmFtZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTW9uZ29EQkNvbmZpZ3VyZWQoKTogYm9vbGVhbiB7XG4gIHJldHVybiAhIXByb2Nlc3MuZW52Lk1PTkdPREJfVVJJXG59XG5cbiJdLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsIm9wdGlvbnMiLCJjbGllbnQiLCJjbGllbnRQcm9taXNlIiwiZ2V0Q2xpZW50UHJvbWlzZSIsInVyaSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsIkVycm9yIiwiZ2xvYmFsV2l0aE1vbmdvIiwiZ2xvYmFsIiwiX21vbmdvQ2xpZW50UHJvbWlzZSIsImNvbm5lY3QiLCJnZXRNb25nb0NsaWVudCIsImdldERiIiwiZGJOYW1lIiwiTU9OR09EQl9EQl9OQU1FIiwiZGIiLCJpc01vbmdvREJDb25maWd1cmVkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/models/Order.ts":
/*!*****************************!*\
  !*** ./lib/models/Order.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createOrder: () => (/* binding */ createOrder),\n/* harmony export */   getAdminStats: () => (/* binding */ getAdminStats),\n/* harmony export */   getOrderById: () => (/* binding */ getOrderById),\n/* harmony export */   getOrders: () => (/* binding */ getOrders),\n/* harmony export */   getOrdersByUserId: () => (/* binding */ getOrdersByUserId),\n/* harmony export */   getUserLastOrderAmount: () => (/* binding */ getUserLastOrderAmount),\n/* harmony export */   getUserOrderCount: () => (/* binding */ getUserOrderCount),\n/* harmony export */   markOrderAsPaid: () => (/* binding */ markOrderAsPaid),\n/* harmony export */   refundOrder: () => (/* binding */ refundOrder),\n/* harmony export */   updateOrderStatus: () => (/* binding */ updateOrderStatus)\n/* harmony export */ });\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../db */ \"(rsc)/./lib/db.ts\");\n\nconst COLLECTION_NAME = \"orders\";\nasync function getOrders() {\n    if (!(0,_db__WEBPACK_IMPORTED_MODULE_0__.isMongoDBConfigured)()) {\n        return [];\n    }\n    const db = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.getDb)();\n    return await db.collection(COLLECTION_NAME).find({}).sort({\n        createdAt: -1\n    }).toArray();\n}\nasync function getOrderById(id) {\n    if (!(0,_db__WEBPACK_IMPORTED_MODULE_0__.isMongoDBConfigured)()) {\n        return null;\n    }\n    const db = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.getDb)();\n    return await db.collection(COLLECTION_NAME).findOne({\n        id\n    });\n}\nasync function getOrdersByUserId(userId) {\n    if (!(0,_db__WEBPACK_IMPORTED_MODULE_0__.isMongoDBConfigured)()) {\n        return [];\n    }\n    const db = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.getDb)();\n    return await db.collection(COLLECTION_NAME).find({\n        userId\n    }).sort({\n        createdAt: -1\n    }).toArray();\n}\nasync function createOrder(data) {\n    if (!(0,_db__WEBPACK_IMPORTED_MODULE_0__.isMongoDBConfigured)()) {\n        throw new Error(\"MongoDB not configured\");\n    }\n    const db = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.getDb)();\n    const order = {\n        id: `order-${Date.now()}`,\n        ...data,\n        isPaid: false,\n        status: \"pending\",\n        createdAt: new Date()\n    };\n    await db.collection(COLLECTION_NAME).insertOne(order);\n    return order;\n}\nasync function updateOrderStatus(id, status) {\n    if (!(0,_db__WEBPACK_IMPORTED_MODULE_0__.isMongoDBConfigured)()) {\n        return null;\n    }\n    const db = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.getDb)();\n    const result = await db.collection(COLLECTION_NAME).findOneAndUpdate({\n        id\n    }, {\n        $set: {\n            status\n        }\n    }, {\n        returnDocument: \"after\"\n    });\n    return result || null;\n}\nasync function markOrderAsPaid(id, paymentResult) {\n    if (!(0,_db__WEBPACK_IMPORTED_MODULE_0__.isMongoDBConfigured)()) {\n        return null;\n    }\n    const db = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.getDb)();\n    const result = await db.collection(COLLECTION_NAME).findOneAndUpdate({\n        id\n    }, {\n        $set: {\n            isPaid: true,\n            paidAt: new Date(),\n            status: \"processing\",\n            paymentResult\n        }\n    }, {\n        returnDocument: \"after\"\n    });\n    return result || null;\n}\nasync function refundOrder(id, refundAmountINR, reason = \"Customer requested refund\") {\n    if (!(0,_db__WEBPACK_IMPORTED_MODULE_0__.isMongoDBConfigured)()) {\n        return null;\n    }\n    const db = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.getDb)();\n    const result = await db.collection(COLLECTION_NAME).findOneAndUpdate({\n        id,\n        isPaid: true\n    }, {\n        $set: {\n            isRefunded: true,\n            refundAmountINR,\n            refundReason: reason,\n            refundedAt: new Date(),\n            status: \"cancelled\"\n        }\n    }, {\n        returnDocument: \"after\"\n    });\n    return result || null;\n}\nasync function getAdminStats() {\n    if (!(0,_db__WEBPACK_IMPORTED_MODULE_0__.isMongoDBConfigured)()) {\n        // Return empty stats structure if MongoDB not configured\n        return {\n            totalRevenueINR: 0,\n            totalProducts: 0,\n            totalOrders: 0,\n            totalUsers: 0,\n            returnsAmountINR: 0,\n            ordersByStatus: {\n                pending: 0,\n                processing: 0,\n                shipped: 0,\n                delivered: 0,\n                cancelled: 0\n            },\n            salesByDay: []\n        };\n    }\n    try {\n        const db = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.getDb)();\n        const totalOrders = await db.collection(COLLECTION_NAME).countDocuments();\n        const paidOrders = await db.collection(COLLECTION_NAME).find({\n            isPaid: true,\n            isRefunded: {\n                $ne: true\n            }\n        }).toArray();\n        const totalRevenue = paidOrders.reduce((sum, o)=>sum + o.totalPriceINR, 0);\n        const refundedOrders = await db.collection(COLLECTION_NAME).find({\n            isRefunded: true\n        }).toArray();\n        const returnsAmount = refundedOrders.reduce((sum, o)=>sum + (o.refundAmountINR || 0), 0);\n        // Orders by status\n        const statusCounts = await db.collection(COLLECTION_NAME).aggregate([\n            {\n                $group: {\n                    _id: \"$status\",\n                    count: {\n                        $sum: 1\n                    }\n                }\n            }\n        ]).toArray();\n        const ordersByStatus = {\n            pending: 0,\n            processing: 0,\n            shipped: 0,\n            delivered: 0,\n            cancelled: 0\n        };\n        statusCounts.forEach((item)=>{\n            if (item._id in ordersByStatus) {\n                ordersByStatus[item._id] = item.count;\n            }\n        });\n        // Sales by day for last 30 days\n        const today = new Date();\n        const thirtyDaysAgo = new Date(today);\n        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n        const salesByDay = [];\n        for(let i = 29; i >= 0; i--){\n            const date = new Date(today);\n            date.setDate(date.getDate() - i);\n            const dateStr = date.toISOString().split(\"T\")[0];\n            const nextDate = new Date(date);\n            nextDate.setDate(nextDate.getDate() + 1);\n            const dayOrders = await db.collection(COLLECTION_NAME).find({\n                createdAt: {\n                    $gte: date,\n                    $lt: nextDate\n                }\n            }).toArray();\n            const totalSales = dayOrders.filter((o)=>o.isPaid && !o.isRefunded).reduce((sum, o)=>sum + o.totalPriceINR, 0);\n            const returns = dayOrders.filter((o)=>o.isRefunded).reduce((sum, o)=>sum + (o.refundAmountINR || 0), 0);\n            salesByDay.push({\n                date: dateStr,\n                totalSalesINR: totalSales,\n                returnsINR: returns,\n                orderCount: dayOrders.length\n            });\n        }\n        return {\n            totalRevenueINR: totalRevenue,\n            totalProducts: 0,\n            totalOrders,\n            totalUsers: 0,\n            returnsAmountINR: returnsAmount,\n            ordersByStatus,\n            salesByDay\n        };\n    } catch (error) {\n        console.error(\"Error fetching admin stats from MongoDB:\", error);\n        // Return empty stats on error\n        return {\n            totalRevenueINR: 0,\n            totalProducts: 0,\n            totalOrders: 0,\n            totalUsers: 0,\n            returnsAmountINR: 0,\n            ordersByStatus: {\n                pending: 0,\n                processing: 0,\n                shipped: 0,\n                delivered: 0,\n                cancelled: 0\n            },\n            salesByDay: []\n        };\n    }\n}\nasync function getUserOrderCount(userId) {\n    if (!(0,_db__WEBPACK_IMPORTED_MODULE_0__.isMongoDBConfigured)()) {\n        return 0;\n    }\n    const db = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.getDb)();\n    return await db.collection(COLLECTION_NAME).countDocuments({\n        userId\n    });\n}\nasync function getUserLastOrderAmount(userId) {\n    if (!(0,_db__WEBPACK_IMPORTED_MODULE_0__.isMongoDBConfigured)()) {\n        return null;\n    }\n    const db = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.getDb)();\n    const lastOrder = await db.collection(COLLECTION_NAME).findOne({\n        userId\n    }, {\n        sort: {\n            createdAt: -1\n        }\n    });\n    return lastOrder?.totalPriceINR || null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkMsVUFBVSxDQUFRSCxpQkFDbEJVLE9BQU8sQ0FBQztRQUFFRTtJQUFPLEdBQUc7UUFBRVAsTUFBTTtZQUFFQyxXQUFXLENBQUM7UUFBRTtJQUFFO0lBQ2pELE9BQU9zRixXQUFXcEMsaUJBQWlCO0FBQ3JDIiwic291cmNlcyI6WyJGOlxcQ29kZV9Kb3VybmV5XFxXZWIgRGV2IFByb2plY3RcXFppcHB5IENhcnRcXGxpYlxcbW9kZWxzXFxPcmRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREYiwgaXNNb25nb0RCQ29uZmlndXJlZCB9IGZyb20gXCIuLi9kYlwiXG5pbXBvcnQgdHlwZSB7IE9yZGVyLCBPcmRlckl0ZW0sIFNoaXBwaW5nQWRkcmVzcywgU2FsZXNCeURheSwgQWRtaW5TdGF0cyB9IGZyb20gXCIuLi90eXBlc1wiXG5cbmNvbnN0IENPTExFQ1RJT05fTkFNRSA9IFwib3JkZXJzXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9yZGVycygpOiBQcm9taXNlPE9yZGVyW10+IHtcbiAgaWYgKCFpc01vbmdvREJDb25maWd1cmVkKCkpIHtcbiAgICByZXR1cm4gW11cbiAgfVxuICBjb25zdCBkYiA9IGF3YWl0IGdldERiKClcbiAgcmV0dXJuIGF3YWl0IGRiXG4gICAgLmNvbGxlY3Rpb248T3JkZXI+KENPTExFQ1RJT05fTkFNRSlcbiAgICAuZmluZCh7fSlcbiAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcbiAgICAudG9BcnJheSgpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPcmRlckJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8T3JkZXIgfCBudWxsPiB7XG4gIGlmICghaXNNb25nb0RCQ29uZmlndXJlZCgpKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBjb25zdCBkYiA9IGF3YWl0IGdldERiKClcbiAgcmV0dXJuIGF3YWl0IGRiLmNvbGxlY3Rpb248T3JkZXI+KENPTExFQ1RJT05fTkFNRSkuZmluZE9uZSh7IGlkIH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPcmRlcnNCeVVzZXJJZCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8T3JkZXJbXT4ge1xuICBpZiAoIWlzTW9uZ29EQkNvbmZpZ3VyZWQoKSkge1xuICAgIHJldHVybiBbXVxuICB9XG4gIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGIoKVxuICByZXR1cm4gYXdhaXQgZGJcbiAgICAuY29sbGVjdGlvbjxPcmRlcj4oQ09MTEVDVElPTl9OQU1FKVxuICAgIC5maW5kKHsgdXNlcklkIH0pXG4gICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pXG4gICAgLnRvQXJyYXkoKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlT3JkZXIoZGF0YToge1xuICB1c2VySWQ6IHN0cmluZ1xuICB1c2VyRW1haWw6IHN0cmluZ1xuICBvcmRlckl0ZW1zOiBPcmRlckl0ZW1bXVxuICBzaGlwcGluZ0FkZHJlc3M6IFNoaXBwaW5nQWRkcmVzc1xuICBwYXltZW50TWV0aG9kOiBzdHJpbmdcbiAgdG90YWxQcmljZUlOUjogbnVtYmVyXG59KTogUHJvbWlzZTxPcmRlcj4ge1xuICBpZiAoIWlzTW9uZ29EQkNvbmZpZ3VyZWQoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk1vbmdvREIgbm90IGNvbmZpZ3VyZWRcIilcbiAgfVxuICBjb25zdCBkYiA9IGF3YWl0IGdldERiKClcbiAgY29uc3Qgb3JkZXI6IE9yZGVyID0ge1xuICAgIGlkOiBgb3JkZXItJHtEYXRlLm5vdygpfWAsXG4gICAgLi4uZGF0YSxcbiAgICBpc1BhaWQ6IGZhbHNlLFxuICAgIHN0YXR1czogXCJwZW5kaW5nXCIsXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICB9XG4gIGF3YWl0IGRiLmNvbGxlY3Rpb248T3JkZXI+KENPTExFQ1RJT05fTkFNRSkuaW5zZXJ0T25lKG9yZGVyKVxuICByZXR1cm4gb3JkZXJcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU9yZGVyU3RhdHVzKGlkOiBzdHJpbmcsIHN0YXR1czogT3JkZXJbXCJzdGF0dXNcIl0pOiBQcm9taXNlPE9yZGVyIHwgbnVsbD4ge1xuICBpZiAoIWlzTW9uZ29EQkNvbmZpZ3VyZWQoKSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYigpXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiXG4gICAgLmNvbGxlY3Rpb248T3JkZXI+KENPTExFQ1RJT05fTkFNRSlcbiAgICAuZmluZE9uZUFuZFVwZGF0ZSh7IGlkIH0sIHsgJHNldDogeyBzdGF0dXMgfSB9LCB7IHJldHVybkRvY3VtZW50OiBcImFmdGVyXCIgfSlcbiAgcmV0dXJuIHJlc3VsdCB8fCBudWxsXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXJrT3JkZXJBc1BhaWQoaWQ6IHN0cmluZywgcGF5bWVudFJlc3VsdDogT3JkZXJbXCJwYXltZW50UmVzdWx0XCJdKTogUHJvbWlzZTxPcmRlciB8IG51bGw+IHtcbiAgaWYgKCFpc01vbmdvREJDb25maWd1cmVkKCkpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGIoKVxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlxuICAgIC5jb2xsZWN0aW9uPE9yZGVyPihDT0xMRUNUSU9OX05BTUUpXG4gICAgLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICB7IGlkIH0sXG4gICAgICB7XG4gICAgICAgICRzZXQ6IHtcbiAgICAgICAgICBpc1BhaWQ6IHRydWUsXG4gICAgICAgICAgcGFpZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHN0YXR1czogXCJwcm9jZXNzaW5nXCIsXG4gICAgICAgICAgcGF5bWVudFJlc3VsdCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7IHJldHVybkRvY3VtZW50OiBcImFmdGVyXCIgfVxuICAgIClcbiAgcmV0dXJuIHJlc3VsdCB8fCBudWxsXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWZ1bmRPcmRlcihcbiAgaWQ6IHN0cmluZyxcbiAgcmVmdW5kQW1vdW50SU5SOiBudW1iZXIsXG4gIHJlYXNvbiA9IFwiQ3VzdG9tZXIgcmVxdWVzdGVkIHJlZnVuZFwiXG4pOiBQcm9taXNlPE9yZGVyIHwgbnVsbD4ge1xuICBpZiAoIWlzTW9uZ29EQkNvbmZpZ3VyZWQoKSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYigpXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiXG4gICAgLmNvbGxlY3Rpb248T3JkZXI+KENPTExFQ1RJT05fTkFNRSlcbiAgICAuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgIHsgaWQsIGlzUGFpZDogdHJ1ZSB9LFxuICAgICAge1xuICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgaXNSZWZ1bmRlZDogdHJ1ZSxcbiAgICAgICAgICByZWZ1bmRBbW91bnRJTlIsXG4gICAgICAgICAgcmVmdW5kUmVhc29uOiByZWFzb24sXG4gICAgICAgICAgcmVmdW5kZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICBzdGF0dXM6IFwiY2FuY2VsbGVkXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyByZXR1cm5Eb2N1bWVudDogXCJhZnRlclwiIH1cbiAgICApXG4gIHJldHVybiByZXN1bHQgfHwgbnVsbFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWRtaW5TdGF0cygpOiBQcm9taXNlPEFkbWluU3RhdHM+IHtcbiAgaWYgKCFpc01vbmdvREJDb25maWd1cmVkKCkpIHtcbiAgICAvLyBSZXR1cm4gZW1wdHkgc3RhdHMgc3RydWN0dXJlIGlmIE1vbmdvREIgbm90IGNvbmZpZ3VyZWRcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxSZXZlbnVlSU5SOiAwLFxuICAgICAgdG90YWxQcm9kdWN0czogMCxcbiAgICAgIHRvdGFsT3JkZXJzOiAwLFxuICAgICAgdG90YWxVc2VyczogMCxcbiAgICAgIHJldHVybnNBbW91bnRJTlI6IDAsXG4gICAgICBvcmRlcnNCeVN0YXR1czoge1xuICAgICAgICBwZW5kaW5nOiAwLFxuICAgICAgICBwcm9jZXNzaW5nOiAwLFxuICAgICAgICBzaGlwcGVkOiAwLFxuICAgICAgICBkZWxpdmVyZWQ6IDAsXG4gICAgICAgIGNhbmNlbGxlZDogMCxcbiAgICAgIH0sXG4gICAgICBzYWxlc0J5RGF5OiBbXSxcbiAgICB9XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYigpXG5cbiAgY29uc3QgdG90YWxPcmRlcnMgPSBhd2FpdCBkYi5jb2xsZWN0aW9uPE9yZGVyPihDT0xMRUNUSU9OX05BTUUpLmNvdW50RG9jdW1lbnRzKClcbiAgXG4gIGNvbnN0IHBhaWRPcmRlcnMgPSBhd2FpdCBkYlxuICAgIC5jb2xsZWN0aW9uPE9yZGVyPihDT0xMRUNUSU9OX05BTUUpXG4gICAgLmZpbmQoeyBpc1BhaWQ6IHRydWUsIGlzUmVmdW5kZWQ6IHsgJG5lOiB0cnVlIH0gfSlcbiAgICAudG9BcnJheSgpXG4gIGNvbnN0IHRvdGFsUmV2ZW51ZSA9IHBhaWRPcmRlcnMucmVkdWNlKChzdW0sIG8pID0+IHN1bSArIG8udG90YWxQcmljZUlOUiwgMClcblxuICBjb25zdCByZWZ1bmRlZE9yZGVycyA9IGF3YWl0IGRiXG4gICAgLmNvbGxlY3Rpb248T3JkZXI+KENPTExFQ1RJT05fTkFNRSlcbiAgICAuZmluZCh7IGlzUmVmdW5kZWQ6IHRydWUgfSlcbiAgICAudG9BcnJheSgpXG4gIGNvbnN0IHJldHVybnNBbW91bnQgPSByZWZ1bmRlZE9yZGVycy5yZWR1Y2UoKHN1bSwgbykgPT4gc3VtICsgKG8ucmVmdW5kQW1vdW50SU5SIHx8IDApLCAwKVxuXG4gIC8vIE9yZGVycyBieSBzdGF0dXNcbiAgY29uc3Qgc3RhdHVzQ291bnRzID0gYXdhaXQgZGJcbiAgICAuY29sbGVjdGlvbjxPcmRlcj4oQ09MTEVDVElPTl9OQU1FKVxuICAgIC5hZ2dyZWdhdGUoW1xuICAgICAge1xuICAgICAgICAkZ3JvdXA6IHtcbiAgICAgICAgICBfaWQ6IFwiJHN0YXR1c1wiLFxuICAgICAgICAgIGNvdW50OiB7ICRzdW06IDEgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSlcbiAgICAudG9BcnJheSgpXG5cbiAgY29uc3Qgb3JkZXJzQnlTdGF0dXMgPSB7XG4gICAgcGVuZGluZzogMCxcbiAgICBwcm9jZXNzaW5nOiAwLFxuICAgIHNoaXBwZWQ6IDAsXG4gICAgZGVsaXZlcmVkOiAwLFxuICAgIGNhbmNlbGxlZDogMCxcbiAgfVxuXG4gIHN0YXR1c0NvdW50cy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgaWYgKGl0ZW0uX2lkIGluIG9yZGVyc0J5U3RhdHVzKSB7XG4gICAgICBvcmRlcnNCeVN0YXR1c1tpdGVtLl9pZCBhcyBrZXlvZiB0eXBlb2Ygb3JkZXJzQnlTdGF0dXNdID0gaXRlbS5jb3VudFxuICAgIH1cbiAgfSlcblxuICAvLyBTYWxlcyBieSBkYXkgZm9yIGxhc3QgMzAgZGF5c1xuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgY29uc3QgdGhpcnR5RGF5c0FnbyA9IG5ldyBEYXRlKHRvZGF5KVxuICB0aGlydHlEYXlzQWdvLnNldERhdGUodGhpcnR5RGF5c0Fnby5nZXREYXRlKCkgLSAzMClcblxuICBjb25zdCBzYWxlc0J5RGF5OiBTYWxlc0J5RGF5W10gPSBbXVxuICBmb3IgKGxldCBpID0gMjk7IGkgPj0gMDsgaS0tKSB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRvZGF5KVxuICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGkpXG4gICAgY29uc3QgZGF0ZVN0ciA9IGRhdGUudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF1cbiAgICBjb25zdCBuZXh0RGF0ZSA9IG5ldyBEYXRlKGRhdGUpXG4gICAgbmV4dERhdGUuc2V0RGF0ZShuZXh0RGF0ZS5nZXREYXRlKCkgKyAxKVxuXG4gICAgY29uc3QgZGF5T3JkZXJzID0gYXdhaXQgZGJcbiAgICAgIC5jb2xsZWN0aW9uPE9yZGVyPihDT0xMRUNUSU9OX05BTUUpXG4gICAgICAuZmluZCh7XG4gICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICRndGU6IGRhdGUsXG4gICAgICAgICAgJGx0OiBuZXh0RGF0ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICAudG9BcnJheSgpXG5cbiAgICBjb25zdCB0b3RhbFNhbGVzID0gZGF5T3JkZXJzXG4gICAgICAuZmlsdGVyKChvKSA9PiBvLmlzUGFpZCAmJiAhby5pc1JlZnVuZGVkKVxuICAgICAgLnJlZHVjZSgoc3VtLCBvKSA9PiBzdW0gKyBvLnRvdGFsUHJpY2VJTlIsIDApXG5cbiAgICBjb25zdCByZXR1cm5zID0gZGF5T3JkZXJzXG4gICAgICAuZmlsdGVyKChvKSA9PiBvLmlzUmVmdW5kZWQpXG4gICAgICAucmVkdWNlKChzdW0sIG8pID0+IHN1bSArIChvLnJlZnVuZEFtb3VudElOUiB8fCAwKSwgMClcblxuICAgIHNhbGVzQnlEYXkucHVzaCh7XG4gICAgICBkYXRlOiBkYXRlU3RyLFxuICAgICAgdG90YWxTYWxlc0lOUjogdG90YWxTYWxlcyxcbiAgICAgIHJldHVybnNJTlI6IHJldHVybnMsXG4gICAgICBvcmRlckNvdW50OiBkYXlPcmRlcnMubGVuZ3RoLFxuICAgIH0pXG4gIH1cblxuICByZXR1cm4ge1xuICAgIHRvdGFsUmV2ZW51ZUlOUjogdG90YWxSZXZlbnVlLFxuICAgIHRvdGFsUHJvZHVjdHM6IDAsIC8vIFdpbGwgYmUgZmlsbGVkIGJ5IGNhbGxlclxuICAgIHRvdGFsT3JkZXJzLFxuICAgIHRvdGFsVXNlcnM6IDAsIC8vIFdpbGwgYmUgZmlsbGVkIGJ5IGNhbGxlclxuICAgIHJldHVybnNBbW91bnRJTlI6IHJldHVybnNBbW91bnQsXG4gICAgb3JkZXJzQnlTdGF0dXMsXG4gICAgc2FsZXNCeURheSxcbiAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBhZG1pbiBzdGF0cyBmcm9tIE1vbmdvREI6XCIsIGVycm9yKVxuICAgIC8vIFJldHVybiBlbXB0eSBzdGF0cyBvbiBlcnJvclxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFJldmVudWVJTlI6IDAsXG4gICAgICB0b3RhbFByb2R1Y3RzOiAwLFxuICAgICAgdG90YWxPcmRlcnM6IDAsXG4gICAgICB0b3RhbFVzZXJzOiAwLFxuICAgICAgcmV0dXJuc0Ftb3VudElOUjogMCxcbiAgICAgIG9yZGVyc0J5U3RhdHVzOiB7XG4gICAgICAgIHBlbmRpbmc6IDAsXG4gICAgICAgIHByb2Nlc3Npbmc6IDAsXG4gICAgICAgIHNoaXBwZWQ6IDAsXG4gICAgICAgIGRlbGl2ZXJlZDogMCxcbiAgICAgICAgY2FuY2VsbGVkOiAwLFxuICAgICAgfSxcbiAgICAgIHNhbGVzQnlEYXk6IFtdLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlck9yZGVyQ291bnQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xuICBpZiAoIWlzTW9uZ29EQkNvbmZpZ3VyZWQoKSkge1xuICAgIHJldHVybiAwXG4gIH1cbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYigpXG4gIHJldHVybiBhd2FpdCBkYi5jb2xsZWN0aW9uPE9yZGVyPihDT0xMRUNUSU9OX05BTUUpLmNvdW50RG9jdW1lbnRzKHsgdXNlcklkIH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyTGFzdE9yZGVyQW1vdW50KHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXIgfCBudWxsPiB7XG4gIGlmICghaXNNb25nb0RCQ29uZmlndXJlZCgpKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBjb25zdCBkYiA9IGF3YWl0IGdldERiKClcbiAgY29uc3QgbGFzdE9yZGVyID0gYXdhaXQgZGJcbiAgICAuY29sbGVjdGlvbjxPcmRlcj4oQ09MTEVDVElPTl9OQU1FKVxuICAgIC5maW5kT25lKHsgdXNlcklkIH0sIHsgc29ydDogeyBjcmVhdGVkQXQ6IC0xIH0gfSlcbiAgcmV0dXJuIGxhc3RPcmRlcj8udG90YWxQcmljZUlOUiB8fCBudWxsXG59XG5cbiJdLCJuYW1lcyI6WyJnZXREYiIsImlzTW9uZ29EQkNvbmZpZ3VyZWQiLCJDT0xMRUNUSU9OX05BTUUiLCJnZXRPcmRlcnMiLCJkYiIsImNvbGxlY3Rpb24iLCJmaW5kIiwic29ydCIsImNyZWF0ZWRBdCIsInRvQXJyYXkiLCJnZXRPcmRlckJ5SWQiLCJpZCIsImZpbmRPbmUiLCJnZXRPcmRlcnNCeVVzZXJJZCIsInVzZXJJZCIsImNyZWF0ZU9yZGVyIiwiZGF0YSIsIkVycm9yIiwib3JkZXIiLCJEYXRlIiwibm93IiwiaXNQYWlkIiwic3RhdHVzIiwiaW5zZXJ0T25lIiwidXBkYXRlT3JkZXJTdGF0dXMiLCJyZXN1bHQiLCJmaW5kT25lQW5kVXBkYXRlIiwiJHNldCIsInJldHVybkRvY3VtZW50IiwibWFya09yZGVyQXNQYWlkIiwicGF5bWVudFJlc3VsdCIsInBhaWRBdCIsInJlZnVuZE9yZGVyIiwicmVmdW5kQW1vdW50SU5SIiwicmVhc29uIiwiaXNSZWZ1bmRlZCIsInJlZnVuZFJlYXNvbiIsInJlZnVuZGVkQXQiLCJnZXRBZG1pblN0YXRzIiwidG90YWxSZXZlbnVlSU5SIiwidG90YWxQcm9kdWN0cyIsInRvdGFsT3JkZXJzIiwidG90YWxVc2VycyIsInJldHVybnNBbW91bnRJTlIiLCJvcmRlcnNCeVN0YXR1cyIsInBlbmRpbmciLCJwcm9jZXNzaW5nIiwic2hpcHBlZCIsImRlbGl2ZXJlZCIsImNhbmNlbGxlZCIsInNhbGVzQnlEYXkiLCJjb3VudERvY3VtZW50cyIsInBhaWRPcmRlcnMiLCIkbmUiLCJ0b3RhbFJldmVudWUiLCJyZWR1Y2UiLCJzdW0iLCJvIiwidG90YWxQcmljZUlOUiIsInJlZnVuZGVkT3JkZXJzIiwicmV0dXJuc0Ftb3VudCIsInN0YXR1c0NvdW50cyIsImFnZ3JlZ2F0ZSIsIiRncm91cCIsIl9pZCIsImNvdW50IiwiJHN1bSIsImZvckVhY2giLCJpdGVtIiwidG9kYXkiLCJ0aGlydHlEYXlzQWdvIiwic2V0RGF0ZSIsImdldERhdGUiLCJpIiwiZGF0ZSIsImRhdGVTdHIiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwibmV4dERhdGUiLCJkYXlPcmRlcnMiLCIkZ3RlIiwiJGx0IiwidG90YWxTYWxlcyIsImZpbHRlciIsInJldHVybnMiLCJwdXNoIiwidG90YWxTYWxlc0lOUiIsInJldHVybnNJTlIiLCJvcmRlckNvdW50IiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0VXNlck9yZGVyQ291bnQiLCJnZXRVc2VyTGFzdE9yZGVyQW1vdW50IiwibGFzdE9yZGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/models/Order.ts\n");

/***/ })

};
;